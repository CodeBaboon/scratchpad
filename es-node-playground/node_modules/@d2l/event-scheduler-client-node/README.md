# event-scheduler-client-node

[![CircleCI](https://circleci.com/gh/Brightspace/event-scheduler-client-node/tree/main.svg?style=shield&circle-token=a0ab7cb342bb8cef142c22b8767a8e6a10547f34)](https://circleci.com/gh/Brightspace/event-scheduler-client-node/tree/main)
[![Coverage Status](https://coveralls.io/repos/github/Brightspace/event-scheduler-client-node/badge.svg?t=gYDxMF)](https://coveralls.io/github/Brightspace/event-scheduler-client-node)

Node.js client for the [Event Scheduler Service](https://github.com/Brightspace/event-scheduler-service)

## Rules

### create

Creates a new rule with the specified properties. `ruleKey` is auto generated from these properties. Invalid JSON blobs will result in a 400 Error.

- **tenantId** - { string, uuid } id for the tenant.
- **type** - { string, enum } - the rule type. Currently supports `course-enrollment` and `scheduled-date`.
- **target** - { object } the target of the rule.
  - **type** - { string, enum } the type of object targeted by the rule. Currently supports `user`, `group`, and `class-stream:activity`.
  - **id** - { string } the unique identifier of the object targeted by the rule.
- **conditions** - { object[] } array of conditions.
- **actions** - { object[] } array of actions.
- **actor** - { string } the last person to modify the rule, defaults to `system`.

### get

Fetches a rule based on the provided data. Invalid JSON blobs will result in a 400 Error, non-existent or deleted rules will result in a 404 error.

- **tenantId** - { string, uuid } id for the tenant.
- **type** - { string, enum } - the rule type. Currently supports `course-enrollment` and `scheduled-date`.
- **target** - { object } the target of the rule.
  - **type** - { string, enum } the type of object targeted by the rule. Currently supports `user`, `group`, and `class-stream:activity`.
  - **id** - { string } the unique identifier of the object targeted by the rule.

### update

Updates a rule with the specified properties. `ruleKey` is auto generated from these properties. Invalid JSON blobs will result in a 400 Error, non-existent or deleted rules will result in a 404 error, incorrect expectedVersion number will result in a 409 error.

- **tenantId** - { string, uuid } id for the tenant.
- **type** - { string, enum } - the rule type. Currently supports `course-enrollment` and `scheduled-date`.
- **target** - { object } the target of the rule.
  - **type** - { string, enum } the type of object targeted by the rule. Currently supports `user`, `group`, and `class-stream:activity`.
  - **id** - { string } the unique identifier of the object targeted by the rule.
- **conditions** - { object[] } array of conditions.
- **actions** - { object[] } array of actions.
- **actor** - { string } the last person to modify the rule, defaults to `system`.
- **expectedVersion** - { number } the value of `_v` on the rule that you expect the rule to be equal to.

#### delete

Deletes a rule with the specified properties. `ruleKey` is auto generated from these properties. Rule is soft-deleted and can be undeleted by creating a rule with the identical ruleKey properties. Invalid JSON blobs will result in a 400 Error, non-existent rules will result in a 404 error, incorrect expectedVersion number will result in a 409 error.

- **tenantId** - { string, uuid } id for the tenant.
- **type** - { string, enum } - the rule type. Currently supports `course-enrollment` and `scheduled-date`.
- **target** - { object } the target of the rule.
  - **type** - { string, enum } the type of object targeted by the rule. Currently supports `user`, `group`, and `class-stream:activity`.
  - **id** - { string } the unique identifier of the object targeted by the rule.
- **expectedVersion** - { number } the value of `_v` on the rule that you expect the rule to be equal to.
